
<!doctype html>
<html lang="es">
<%- include('../Componentes/header')%>
<style>
    .gestion{
        padding-top: 20px
    }
    .activo{
        color:green;
    }
    .inactivo{
        color:red;
    }
</style>
<body>

<div class="container gestion">
    
    <div class="row text-center">
        <div class="col-sm-12">
            <div class="tab-content">
                <div id="usuarios" class="tab-pane fade in active">
                    <div class="col-sm-12">
                        <table class="table table-sm table-hover table-bordered">
                            <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Dirección</th>
                                <th>Telefono</th>
                                <th>Estado</th>
                                <th>Accion</th>
                                <th>Editar</th>
                            </tr>
                            </thead>
                            <tbody id="bodyUsuarios">
                                <%listaUsuarios.forEach((usuario)=>{%>
                                    <tr>  
                                        <td><%=usuario.nombreUsuario%></td>
                                        <td><%=usuario.direccionUsuario%></td>
                                        <td><%=usuario.telefonoUsuario%></td>
                                        <%if(usuario.estadoUsuario){%>
                                            <td class="activo">
                                                <span class="glyphicon glyphicon-ok"></span>
                                            </td>
                                            <td>
                                                <form action="" method="post">
                                                    <input type="number" name="usuario" id="usuarioId" value="<%=usuario.usuarioId%>" hidden>
                                                    <button type="submit" class="btn btn-xs btn-danger">Desactivar</button>
                                                </form>
                                            </td>
                                        <%}else{%>
                                            <td class="inactivo">
                                                <span class="glyphicon glyphicon-remove"></span>
                                            </td>
                                            <td>
                                                <form action="" method="post">
                                                    <input type="number" name="usuario" id="usuarioId" value="<%=usuario.usuarioId%>" hidden>
                                                    <button type="submit" class="btn btn-xs btn-success">Activar</button>
                                                </form>
                                            </td>
                                        <%}%>
                                        <td>
                                            <form action="" method="post">
                                                <input type="number" name="usuario" id="usuarioId" value="<%=usuario.usuarioId%>" hidden>
                                                <button type="submit" class="btn btn-xs btn-success"><span class="glyphicon glyphicon-pencil"></span></button>
                                            </form>
                                        </td>
                                    </tr>
                                <%})%>                                
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="permisos" class="tab-pane fade">
                    <div class="col-sm-12">
                        
                        <table class="table table-sm table-hover table-bordered">
                            <thead class="text-center">
                            <tr>
                                <th>Usuario</th>
                                <th>Roles</th>
                                <th>Permisos</th>
                                <th colspan="2">Acciones</th>
                            </tr>
                            </thead>

                            <tbody id="bodyPermisos">
                                <%listaUsuarios.forEach((usuario)=>{%>
                                    <tr>  
                                        <td><%=usuario.nombreUsuario%></td>
                                        <td><%=usuario.roles%></td>
                                        <td><%=usuario.Permisos%></td>
                                        <td >
                                            <input type="number" name="usuario" id="usuarioId" value="<%=usuario.usuarioId%>" hidden>
                                            <button type="button" class="btn btn-xs btn-success" id="btn-roles" data-toggle="modal" data-target="#modalRoles">Gestion Roles</button>
                                        </td>
                                        <td>   
                                            <input type="number" name="usuario" id="usuarioId" value="<%=usuario.usuarioId%>" hidden>
                                            <button type="button" class="btn btn-xs btn-success" id="btn-permisos" data-toggle="modal" data-target="#modalPermisos">Gestion Permisos</button>
                                        </td>
                                    </tr>
                                <%})%>   
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="publicaciones" class="tab-pane fade">
                    <div class="col-sm-12">
                        <table class="table table-sm table-hover table-bordered">
                            <thead class="text-center">
                            <tr>
                                <th>Usuario</th>
                                <th>Categoria</th>
                                <th>Vehículo</th>
                                <th>Tipo Precio</th>
                                <th>Precio</th>
                                <th>Aprobar</th>
                            </tr>
                            </thead>

                            <tbody id="bodyPublicaciones">
                                <%listaPublicaciones.forEach((producto)=>{%>
                                    <tr>
                                        <td><%=producto.nombreUsuario%></td>
                                        <td><%=producto.nombreCategoria%></td>
                                        <td><%=producto.descripcionCorta%></td>
                                        <td><%=producto.tipoPrecio%></td>
                                        <td><%=producto.productoPrecio%></td>
                                        <td>
                                            <form action="" method="post">
                                                <input type="number" name="productoId" hidden>
                                                <button type="button" class="btn btn-xs btn-primary">Aprobar</button>
                                            </form>
                                        </td>
                                        <td>
                                            <form action="" method="post">
                                                <input type="number" name="publicacionId" hidden>
                                                <button type="button" class="btn btn-xs btn-primary" data-toggle="modal" data-target="#modalComentario">Comentar</button>
                                            </form>
                                            <form action="" method="post">
                                                <input type="number" name="publicacionId" hidden>
                                                <button type="button" class="btn btn-xs btn-primary" data-toggle="modal" data-target="#modalVista">Ver</button>
                                            </form>
            
                                        </td>
                                    </tr>
                                <%})%>    
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="historial" class="tab-pane fade">
                    <div class="col-sm-12">
                        <table class="table table-sm table-hover table-bordered">
                            <thead>
                                
                                <tr>
                                    <th>Usuario</th>
                                    <th>Fecha Inicio</th>
                                    <th>Fecha Fin</th>
                                    <th>Total</th>
                                </tr>
                            </thead>

                            <tbody id="bodyHistorial">
                                <%listaAlquiler.forEach((alquiler)=>{%>
                                    <tr>
                                        <td><%=alquiler.usuario%></td>
                                        <td><%=alquiler.fechaInicioAlquiler%></td>
                                        <td><%=alquiler.fechaFinAlquiler%></td>
                                        <td><%=alquiler.totalAlquiler%></td>
                                    </tr>
                                <%})%>

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<div id="modalRoles" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Roles</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <form action="">
                    <table class="table table-sm table-hover table-bordered">

                        <tbody >
                            <%listaRoles.forEach((rol)=>{%>
                                <tr>  
                                    <td width="300px"><%=rol.rolNombre%></td>
                                    <td class="text-center">
                                        <input type="checkbox">
                                    </td>
                                </tr>
                            <%})%> 
                        </tbody>
                    </table>
                </form>
            </div>
            <div class="modal-footer">
                <div class="col-xs-6">
                    <form action="">
                        <button type="submit" class="btn btn-primary" data-dismiss="modal">Guardar</button>
                    </form>
                </div>
                <div class="col-xs-6">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>


            </div>
        </div>

    </div>
</div>
<div id="modalPermisos" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Roles</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <form action="">
                    <table class="table table-sm table-hover table-bordered">

                        <tbody >
                            <%listaPermisos.forEach((permiso)=>{%>
                                <tr>  
                                    <td width="300px"><%=permiso.permisoNombre%></td>
                                    <td class="text-center">
                                        <input type="checkbox" >
                                    </td>
                                </tr>
                            <%})%> 
                        </tbody>
                    </table>
                </form>
            </div>
            <div class="modal-footer">
                <div class="col-xs-6">
                    <form action="">
                        <button type="submit" class="btn btn-primary" data-dismiss="modal">Guardar</button>
                    </form>
                </div>
                <div class="col-xs-6">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>


            </div>
        </div>

    </div>
</div>




<script>

</script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
</body>
</html>